# 第三章 正则表达式的特性和流派概述

现在，我们稍微找到点感觉了，也见识了若干使用正则表达式的工具软件，你可能觉得，该是坐下来潜心研究研究如何使用它们了。

不过，你需要知道的是，工具不同，正则表达式的写法和用法都有很大的不同。

在某种特定的宿主语言或工具软件中使用正则表达式，主要有 3 个问题值得注意：

- 支持的元字符，以及这些元字符的意义。这通常称为正则表达式的“流派”（flavor）。
- 正则表达式与语言或工具的“交互”方式。譬如如何进行正则表达式操作，容许进行哪些操作，以及这些操作的目标文本类型。
- 正则表达式引擎如何将表达式应用到文本。语言或工具的设计者实现正则表达式的方法，对正则表达式能够取得的结果有重要的影响。

#### 本章的内容

如标题所示，这一张讲解正则表达式的特性和流派。

关于本章，我要说的一点是，它并不告诉你某种工具软件中的正则表达式提供了哪些特性，也不会教育你如何使用在提过的各种工具软件和编程语言中运用正则表达式。相反，这里要说的是，提供关于正则表达式本身和使用它的工具软件的完整图景。我们了解我们所用的工具的技术渊源，或许能够提供有趣而有价值的启示。

## 在正则的世界里漫步

今天的内容很放松，你可准备你最爱的饮料，放轻松，我们一起来看看今天的正则表达式背后古怪的发展史。这么做的目的是为了让你全面了解正则表达式，培养追问“为什么会如此”的习惯。

### 正则表达式的起源

关于正则表达式，最初的想法来自 20 世纪 40 年代的两位神经学家，Warren McCulloch 和 Walter Pitts，他们研究出一种模型，认为神经系统在神经元层面就是这样工作的。若干年后，数学家 Stephen Kleene 在代数中正式描述了这种被他成为“正则集合”的模型，正则表达式才成为现实。他发明了一套简洁的表示正则集合的方法，他称之为“正则表达式”。

而后在漫长的分化和标准化的过程中，正则表达式的发展历程仍然是一个谜。

当时，Perl 语言是首屈一指的代表，它的初衷是文本处理，而 Web 页的生成其实正是文本处理，所以 Perl 语言迅速成为了开发 Web 程序的语言。Perl 广受欢迎，其中强大的正则流派也是如此。

其它语言的开发者当然不会视而不见，最终再某种程度上“兼容 Perl”的正则表达式包出现了。Tcl、Python、.NET、Ruby、PHP、C/C++ 各有各的正则表达式包，Java 语言中还有多个正则表达式包。

正则表达式，其中最基本的匹配，以及查找和替换，根据匹配的结果修改字符串。这些操作可以以多种形式进行，不同的语言对此也有不同的规定。

一般来说，程序设计语言有 3 种处理正则表达式的方式：集成式、程序式和面向对象式。第一种方式，正则表达式是直接内建在语言之中的，Perl 就是如此。但是在其它两种方式中，正则表达式不属于语言的低级语法。

这里还有各种关于别的语言的正则表达式的区别和联系。请移步看原书，这里不再做详细介绍（因为我是学 JavaScript 的，其它语言不是很了解）。由于本书在 20 世纪 90 年代写成，因此那时的 JavaScript 还被认为是“玩具”语言，所以本书并没介绍它。而我使用了 JavaScript 来进行学习和描述。

## Unicode

Unicode 究竟是什么？似乎还存在许多的误解。从最基本的意义上说，Unicode 是一组**字符设定**，或者是从数字和字符之间的逻辑映射的**概念编码**。数值成为一个“代码点”，通常用十六进制来表示，以“U+”开头。

一定要弄清楚的是，"\uC0B5" 的意思是“匹配编号为 U+C0B5 的 Unicode 字符”，而没有说具体需要比较哪些字节，因为具体的字节是由代表这个 Unicode 代码点的编码方式在内部决定的。如果程序内部使用的是 UTF-8 编码，这个字符就用 3 个字节表示。

剩下的部分就不再详细展开了。

 以后再单独一章讲 Unicode 编码。